---
import Base from "../layouts/Base.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("technical-projects")).sort(
  (a, b) => a.data.order - b.data.order
);
---

<Base title="Technical Projects - Eric">
  <!-- This page is about decisions, not demos -->
  <section class="py-16">
    <div class="page-container">
      <div class="max-w-2xl">
        <h1 class="text-4xl font-semibold text-ink">Technical Projects</h1>
        <p class="mt-3 text-muted">
          Systems work with clear constraints, architecture decisions, and
          outcomes.
        </p>
      </div>

      <div class="mt-10 grid gap-6">
        {projects.map((project) => (
          <article class="surface p-6">
            <h2 class="text-2xl font-semibold text-ink">{project.data.title}</h2>
            <p class="mt-2 text-muted">{project.data.summary}</p>

            <div class="mt-6 grid gap-5 md:grid-cols-2">
              <div>
                <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                  Why it existed
                </h3>
                <p class="mt-2 text-sm text-muted">{project.data.why}</p>
              </div>
              <div>
                <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                  Outcome
                </h3>
                <p class="mt-2 text-sm text-muted">{project.data.outcome}</p>
              </div>
            </div>

            <div class="mt-6 grid gap-5 md:grid-cols-3">
              <div>
                <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                  Constraints
                </h3>
                <ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-muted">
                  {project.data.constraints.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
              <div>
                <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                  Stack
                </h3>
                <ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-muted">
                  {project.data.stack.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
              <div>
                <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                  Key decisions
                </h3>
                <ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-muted">
                  {project.data.decisions.map((item) => (
                    <li>{item}</li>
                  ))}
                </ul>
              </div>
            </div>
            <div class="mt-6">
              <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-muted">
                Tradeoffs
              </h3>
              <ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-muted">
                {project.data.tradeoffs.map((item) => (
                  <li>{item}</li>
                ))}
              </ul>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>
</Base>
