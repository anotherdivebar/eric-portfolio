---
import Base from "../../layouts/Base.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const entries = await getCollection("blog");
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry }
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Base title={`${entry.data.title} - Eric`}>
  <section class="py-16">
    <div class="page-container-narrow">
      <a
        href="/blog"
        class="focus-ring text-sm font-semibold text-accent hover:text-accent-dark"
      >
        Back to insights
      </a>
      <h1 class="mt-4 text-4xl font-semibold text-ink">{entry.data.title}</h1>
      <p class="mt-2 text-muted">{entry.data.description}</p>
      <p class="mt-3 text-sm text-muted">
        {entry.data.publishDate.toLocaleDateString("en-US", {
          year: "numeric",
          month: "long",
          day: "numeric"
        })}
      </p>
      <article class="prose mt-8 max-w-none">
        <Content />
      </article>
    </div>
  </section>
</Base>
